(function(t){function n(n){for(var r,s,o=n[0],u=n[1],l=n[2],d=0,f=[];d<o.length;d++)s=o[d],a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(n);while(f.length)f.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],r=!0,o=1;o<e.length;o++){var u=e[o];0!==a[u]&&(r=!1)}r&&(i.splice(n--,1),t=s(s.s=e[0]))}return t}var r={},a={app:0},i=[];function s(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=r,s.d=function(t,n,e){s.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,n){if(1&n&&(t=s(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)s.d(e,r,function(n){return t[n]}.bind(null,r));return e},s.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(n,"a",n),n},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=n,o=o.slice();for(var l=0;l<o.length;l++)n(o[l]);var c=u;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";var r=e("64a9"),a=e.n(r);a.a},3046:function(t,n,e){"use strict";var r=e("bb7a"),a=e.n(r);a.a},"3e2b":function(t,n,e){"use strict";var r=e("d52e"),a=e.n(r);a.a},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("097d");var r=e("2b0e"),a=e("0665"),i=e.n(a),s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"nav"}},[e("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),e("router-link",{attrs:{to:"/export"}},[t._v("Export")])],1),e("router-view")],1)},o=[],u={name:"App",mounted:function(){this.$store.dispatch("loadLinks")}},l=u,c=(e("034f"),e("2877")),d=Object(c["a"])(l,s,o,!1,null,null,null);d.options.__file="App.vue";var f=d.exports,p=e("8c4f"),v=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home"},[e("AddLink"),e("ListLinks",{attrs:{links:t.links}})],1)},m=[],g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"link-form"},[e("div",{staticClass:"lf-input"},[e("div",{staticClass:"lf-input-item"},[e("label",{attrs:{for:"lf-name"}},[t._v(" Name ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],class:{hasError:!0!==t.namev},attrs:{id:"lf-name",type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||(t.name=n.target.value)}}})]),e("p",{staticClass:"lf-error"},[t._v(" "+t._s(!0===t.namev?" ":t.namev)+" ")])]),e("div",{staticClass:"lf-input"},[e("div",{staticClass:"lf-input-item"},[e("label",{attrs:{for:"lf-url"}},[t._v(" URL ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],class:{hasError:!0!==t.urlv},attrs:{id:"lf-url",type:"text"},domProps:{value:t.url},on:{input:function(n){n.target.composing||(t.url=n.target.value)}}})]),e("p",{staticClass:"lf-error"},[t._v(" "+t._s(!0===t.urlv?" ":t.urlv)+" ")])]),e("div",{staticClass:"lf-input"},[e("div",{staticClass:"lf-input-item"},[e("label",{attrs:{for:"lf-desc"}},[t._v(" Description ")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],class:{hasError:!0!==t.descv},attrs:{id:"lf-desc"},domProps:{value:t.desc},on:{input:function(n){n.target.composing||(t.desc=n.target.value)}}})]),e("p",{staticClass:"lf-error"},[t._v(" "+t._s(!0===t.descv?" ":t.descv)+" ")])]),e("div",{staticClass:"lf-tag-input"},[e("tags-input",{attrs:{"element-id":"add-link-tags",existingTags:t.existingTags,typeahead:!0,"typeahead-style":"dropdown",placeholder:"Add Tags","add-tags-on-comma":!0},model:{value:t.tags,callback:function(n){t.tags=n},expression:"tags"}})],1),e("button",{attrs:{disabled:"saving"===this.status},on:{click:t.saveLink}},[t._v("\n    Save\n  ")])])},h=[],k=(e("7f7f"),e("4917"),e("0b72"));function b(t){var n=t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g);return null!=n||"Not a valid URL"}function _(t){return!(!t||!t.length)||"Can't be empty"}function y(t,n){return n.reduce(function(n,e){return n&&!0===t[e]},!0)}var x={name:"AddLink",components:{TagsInput:k["a"]},data:function(){return{status:"empty",name:"",desc:"",url:"",tags:[]}},computed:{validated:function(){return y(this,["namev","descv","urlv"])},existingTags:function(){return console.log(this.$store.state.allTags),this.$store.state.allTags},namev:function(){return _(this.name)},descv:function(){return _(this.desc)},urlv:function(){var t=b(this.url);return!0!==t?t:!0!==this.$store.getters.isUrlPresent(this.url)||"Already saved"}},methods:{saveLink:function(){var t=this;this.status,this.$store.dispatch("addLink",{name:this.name,desc:this.desc,url:this.url,tags:this.tags}).then(function(){t.status="empty",t.name="",t.desc="",t.url="",t.tags=[]}).catch(function(n){t.status="errored"})}}},L=x,j=(e("3e2b"),Object(c["a"])(L,g,h,!1,null,null,null));j.options.__file="AddLink.vue";var w=j.exports,O=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"link-lists"},t._l(t.links,function(n){return e("div",{key:n.key},[e("LinkItem",{attrs:{item:n,existingTags:t.existingTags}})],1)}),0)},T=[],C=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"link-item"},[e("a",{staticClass:"link-name",attrs:{href:t.item.url,target:"_blank"}},[t._v(" "+t._s(t.item.name)+" ")]),e("span",{staticClass:"link-desc"},[t._v("\n    "+t._s(t.item.desc)+"\n  ")]),e("button",{staticClass:"link-remove",on:{click:t.removeLink}},[e("eva-icon",{attrs:{name:"close-outline",width:"16px",height:"16px",animation:"pulse",fill:"#C66"}})],1),e("button",{staticClass:"link-edit",on:{click:t.editLink}},[e("eva-icon",{attrs:{name:"edit-2-outline",width:"16px",height:"16px",animation:"pulse",fill:"#66C"}})],1),e("p",{staticClass:"link-tags"},[e("tags-input",{attrs:{"wrapper-class":"link-item-tags-input","element-id":"add-link-tags",existingTags:t.existingTags,typeahead:!0,"typeahead-style":"dropdown",placeholder:"Add Tags","add-tags-on-comma":!0},on:{"tags-updated":t.onUpdateTags},model:{value:t.tags,callback:function(n){t.tags=n},expression:"tags"}})],1)])},E=[],M=e("5176"),$=e.n(M),A={name:"LinkItem",components:{TagsInput:k["a"]},props:{item:Object,existingTags:Object},data:function(){return{tags:[]}},methods:{setTags:function(){this.tags=this.item.tags},onUpdateTags:function(){if(this.item.tags.length!==this.tags.length){var t=$()({},this.item,{tags:this.tags});this.$store.dispatch("updateLink",t)}else console.log("Noting changed")},removeLink:function(){return this.$store.dispatch("removeLink",this.item.key)},editLink:function(){}},mounted:function(){this.setTags()}},I=A,S=(e("3046"),Object(c["a"])(I,C,E,!1,null,null,null));S.options.__file="LinkItem.vue";var P=S.exports,N={name:"ListLinks",components:{LinkItem:P},props:{links:Array},computed:{existingTags:function(){return this.$store.state.allTags}},methods:{removeLink:function(t){return this.$store.dispatch("removeLink",t)}}},z=N,U=(e("59f5"),Object(c["a"])(z,O,T,!1,null,null,null));U.options.__file="ListLinks.vue";var J=U.exports,R={name:"home",components:{AddLink:w,ListLinks:J},data:function(){return{}},computed:{links:function(){return this.$store.state.links}}},Z=R,H=Object(c["a"])(Z,v,m,!1,null,null,null);H.options.__file="Home.vue";var B=H.exports,D=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"export"},[e("pre",[t._v("    "+t._s(JSON.stringify(t.data,null,2))+"\n  ")])])},q=[],F={name:"Export",computed:{data:function(){return this.$store.state.links}}},G=F,K=Object(c["a"])(G,D,q,!1,null,null,null);K.options.__file="Export.vue";var Q=K.exports;r["a"].use(p["a"]);var V=new p["a"]({routes:[{path:"/",name:"home",component:B},{path:"/export",name:"export",component:Q}]}),W=e("768b"),X=e("795b"),Y=e.n(X),tt=(e("5df3"),e("ac6a"),e("2f62")),nt=(e("96cf"),e("3b8d")),et=e("f499"),rt=e.n(et),at=e("0a0d"),it=e.n(at),st=e("ced0");function ot(t,n){var e=new st["a"](t,n),r=0;function a(t){r+=1;var n="".concat(it()(),"_").concat(r),a=$()({key:n},t);return Object(st["e"])(n,rt()(a),e).then(function(){return a})}function i(t){return s.apply(this,arguments)}function s(){return s=Object(nt["a"])(regeneratorRuntime.mark(function t(n){var r,a,i=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:function(t){return t},a=n,a){t.next=6;break}return t.next=5,Object(st["d"])(e);case 5:a=t.sent;case 6:return t.abrupt("return",Y.a.all(a.map(function(t){return Object(st["c"])(t,e).then(r)})));case 7:case"end":return t.stop()}},t,this)})),s.apply(this,arguments)}return{get:function(t){return Object(st["c"])(t,e)},set:function(t,n){return Object(st["e"])(t,n,e)},del:function(t){return Object(st["b"])(t,e)},keys:function(){return Object(st["d"])(e)},setj:a,updatej:function(t,n){return Object(st["e"])(t,rt()(n),e)},getj:function(t){return Object(st["c"])(t,e).then(function(t){return JSON.parse(t)})},values:function(t){return i(t)},valuesj:function(t){return i(t,JSON.parse)}}}var ut={links:ot("links-items","items"),tags:ot("links-tags","tags")};function lt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.key},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};return t.reduce(function(t,r){return t[n(r)]=e(r),t},{})}function ct(t){var n=t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g);return null!=n}function dt(t){if(!t||!1===ct(t))return"null";var n=new URL(t),e="".concat(n.origin).concat(n.pathname);return e}r["a"].use(tt["a"]);var ft=new tt["a"].Store({state:{status:"initializing",error:null,links:[],urlMap:{},linkIdMap:{},allTags:{}},getters:{isUrlPresent:function(t){return function(n){return t.urlMap[dt(n)]||!1}}},mutations:{changeStatus:function(t,n){t.status=n},markErrored:function(t,n){t.status="errored",t.error=n},setLinks:function(t,n){t.links=n,t.linkIdMap=lt(n,function(t){return t.key}),t.urlMap=lt(n,function(t){return dt(t.url)},function(t){return Boolean(t)}),t.allTags=n.reduce(function(t,n){return n.tags.forEach(function(n){t[n]=n}),t},{})},addLink:function(t,n){t.links.push(n),t.linkIdMap[n.key]=n,t.urlMap[dt(n.url)]=n,n.tags.forEach(function(n){t.allTags[n]=n})},removeLink:function(t,n){var e=t.linkIdMap[n];t.links=t.links.filter(function(t){return t.key!==n}),t.urlMap[dt(e.url)]=!1,delete t.linkIdMap[n]},updateLink:function(t,n){for(var e=-1,a=0;a<t.links.length;a+=1){var i=t.links[a];if(console.log("link",a,i),i.key===n.key){e=a;break}}if(-1!==e){var s=t.state.links[e];t.urlMap[dt(s.url)]=!1,delete t.linkIdMap[s.key],r["a"].set(t.links,e,n),t.urlMap[dt(n.url)]=!0,t.linkIdMap[n.key]=n}}},actions:{loadLinks:function(t){var n=t.commit;return n("changeStatus","loading"),Y.a.all([ut.links.valuesj()]).then(function(t){var e=Object(W["a"])(t,1),r=e[0];n("setLinks",r),n("changeStatus","loaded")}).catch(function(t){console.error(t),n("markErrored",t.message)})},addLink:function(t,n){var e=t.commit;return ut.links.setj(n).then(function(t){e("addLink",t)}).catch(function(t){console.error(t),e("markErrored",t.message)})},updateLink:function(t,n){var e=t.commit;return ut.links.updatej(n.key,n).then(function(t){e("updateLink",t)}).catch(function(t){console.error(t),e("markErrored",t.message)})},removeLink:function(t,n){var e=t.commit;return ut.links.del(n).then(function(){e("removeLink",n)}).catch(function(t){console.error(t),e("markErrored",t.message)})}}});r["a"].use(i.a),r["a"].config.productionTip=!1,new r["a"]({router:V,store:ft,render:function(t){return t(f)}}).$mount("#app")},"59f5":function(t,n,e){"use strict";var r=e("7f62"),a=e.n(r);a.a},"64a9":function(t,n,e){},"7f62":function(t,n,e){},bb7a:function(t,n,e){},d52e:function(t,n,e){}});
//# sourceMappingURL=app.1ec3cc61.js.map